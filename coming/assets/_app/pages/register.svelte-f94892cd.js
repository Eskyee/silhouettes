import{S as a,i as s,s as t,l as o,f as e,r,u as c,v as n,d as i,K as l,B as u,O as m,P as f,e as d,t as h,k as p,j as v,c as g,a as $,g as E,n as b,m as w,b as j,E as k,o as I,I as y,Q as V,R as D,w as R,F as T,G as z,T as O,U as x,V as F}from"../chunks/vendor-d832f65a.js";import{P as N}from"../chunks/pending-06eeccdc.js";import{s as P}from"../chunks/stores-ac453296.js";import{m as U}from"../chunks/stores-71f40619.js";import{b as q}from"../chunks/api-e82c6813.js";import{e as B,a as H,f as S}from"../chunks/utils-888e29b8.js";import{F as A}from"../chunks/fields-a8761b35.js";import"../chunks/singletons-bb9012b7.js";const C=async(a,s)=>{try{B(void 0),await q.url("/activate").post({code:a,email:s}).unauthorized(B).badRequest(B).json(),H("/goodies",{noscroll:!0})}catch(t){B(t.message)}};function L(a){let s,t,o,c,l,u,T,z,O,x,F,N,P,U,q,B,H,S,C;function L(s){a[8](s)}function M(s){a[9](s)}let W={};return void 0!==a[2]&&(W.email=a[2]),void 0!==a[3]&&(W.password=a[3]),O=new A({props:W}),m.push((()=>f(O,"email",L))),m.push((()=>f(O,"password",M))),{c(){s=d("h2"),t=h("Almost there"),o=p(),c=d("p"),l=h("We just need an email and password"),u=p(),T=d("div"),z=d("form"),v(O.$$.fragment),N=p(),P=d("div"),U=d("div"),q=d("button"),B=h("Register"),this.h()},l(a){s=g(a,"H2",{class:!0});var e=$(s);t=E(e,"Almost there"),e.forEach(i),o=b(a),c=g(a,"P",{class:!0});var r=$(c);l=E(r,"We just need an email and password"),r.forEach(i),u=b(a),T=g(a,"DIV",{class:!0});var n=$(T);z=g(n,"FORM",{autocomplete:!0});var m=$(z);w(O.$$.fragment,m),N=b(m),P=g(m,"DIV",{class:!0});var f=$(P);U=g(f,"DIV",{class:!0});var d=$(U);q=g(d,"BUTTON",{type:!0});var h=$(q);B=E(h,"Register"),h.forEach(i),d.forEach(i),f.forEach(i),m.forEach(i),n.forEach(i),this.h()},h(){j(s,"class","container"),j(c,"class","container"),j(q,"type","submit"),j(U,"class","container column"),j(P,"class","container form-submit-controls"),j(z,"autocomplete","off"),j(T,"class","container")},m(r,n){e(r,s,n),k(s,t),e(r,o,n),e(r,c,n),k(c,l),e(r,u,n),e(r,T,n),k(T,z),I(O,z,null),k(z,N),k(z,P),k(P,U),k(U,q),k(q,B),H=!0,S||(C=y(z,"submit",V(a[5])),S=!0)},p(a,s){const t={};!x&&4&s&&(x=!0,t.email=a[2],D((()=>x=!1))),!F&&8&s&&(F=!0,t.password=a[3],D((()=>F=!1))),O.$set(t)},i(a){H||(n(O.$$.fragment,a),H=!0)},o(a){r(O.$$.fragment,a),H=!1},d(a){a&&i(s),a&&i(o),a&&i(c),a&&i(u),a&&i(T),R(O),S=!1,C()}}}function M(a){let s,t,o,c,l,u,m,f;return m=new N({props:{size:"medium"}}),{c(){s=d("div"),t=d("div"),o=d("h3"),c=h("Loading"),l=p(),u=d("div"),v(m.$$.fragment),this.h()},l(a){s=g(a,"DIV",{id:!0,class:!0});var e=$(s);t=g(e,"DIV",{class:!0});var r=$(t);o=g(r,"H3",{});var n=$(o);c=E(n,"Loading"),n.forEach(i),r.forEach(i),l=b(e),u=g(e,"DIV",{class:!0});var f=$(u);w(m.$$.fragment,f),f.forEach(i),e.forEach(i),this.h()},h(){j(t,"class","container"),j(u,"class","container"),j(s,"id","loading"),j(s,"class","container column")},m(a,r){e(a,s,r),k(s,t),k(t,o),k(o,c),k(s,l),k(s,u),I(m,u,null),f=!0},p:T,i(a){f||(n(m.$$.fragment,a),f=!0)},o(a){r(m.$$.fragment,a),f=!1},d(a){a&&i(s),R(m)}}}function W(a){let s,t,o,r,c,n,l,u,m,f,v,w,I,D,R,N;return{c(){s=d("h2"),t=h("Registered!"),o=p(),r=d("div"),c=h("Check your email for an activation code"),n=p(),l=d("form"),u=d("div"),m=d("div"),f=d("input"),v=p(),w=d("div"),I=d("button"),D=h("Submit"),this.h()},l(a){s=g(a,"H2",{class:!0});var e=$(s);t=E(e,"Registered!"),e.forEach(i),o=b(a),r=g(a,"DIV",{class:!0});var d=$(r);c=E(d,"Check your email for an activation code"),d.forEach(i),n=b(a),l=g(a,"FORM",{});var h=$(l);u=g(h,"DIV",{class:!0});var p=$(u);m=g(p,"DIV",{class:!0,style:!0});var j=$(m);f=g(j,"INPUT",{id:!0,autofocus:!0,autocapitalize:!0,class:!0}),j.forEach(i),p.forEach(i),v=b(h),w=g(h,"DIV",{class:!0});var k=$(w);I=g(k,"BUTTON",{});var y=$(I);D=E(y,"Submit"),y.forEach(i),k.forEach(i),h.forEach(i),this.h()},h(){j(s,"class","container"),j(r,"class","container mb"),j(f,"id","code"),f.autofocus=!0,j(f,"autocapitalize","off"),j(f,"class","grow"),j(m,"class","container"),z(m,"max-width","200px"),z(m,"margin","0 auto"),j(u,"class","form-field"),j(w,"class","container")},m(i,d){e(i,s,d),k(s,t),e(i,o,d),e(i,r,d),k(r,c),e(i,n,d),e(i,l,d),k(l,u),k(u,m),k(m,f),O(f,a[0]),k(l,v),k(l,w),k(w,I),k(I,D),f.focus(),R||(N=[y(f,"input",a[6]),x(S.call(null,f)),y(l,"submit",V(a[7]))],R=!0)},p(a,s){1&s&&f.value!==a[0]&&O(f,a[0])},i:T,o:T,d(a){a&&i(s),a&&i(o),a&&i(r),a&&i(n),a&&i(l),R=!1,F(N)}}}function G(a){let s,t,l,m;const f=[W,M,L],d=[];function h(a,s){return a[1].user?0:a[4]?1:2}return s=h(a),t=d[s]=f[s](a),{c(){t.c(),l=o()},l(a){t.l(a),l=o()},m(a,t){d[s].m(a,t),e(a,l,t),m=!0},p(a,[o]){let e=s;s=h(a),s===e?d[s].p(a,o):(u(),r(d[e],1,1,(()=>{d[e]=null})),c(),t=d[s],t?t.p(a,o):(t=d[s]=f[s](a),t.c()),n(t,1),t.m(l.parentNode,l))},i(a){m||(n(t),m=!0)},o(a){r(t),m=!1},d(a){d[s].d(a),a&&i(l)}}}function K(a,s,t){let o,e,r;l(a,U,(a=>t(10,o=a))),l(a,P,(a=>t(1,e=a)));let c,n,i="liquidart";return a.$$.update=()=>{3&a.$$.dirty&&c&&c.length>=6&&C(c,e.user.email)},[c,e,r,i,n,async()=>{t(4,n=!0),await(async(a,s,t)=>{try{B(void 0);let{jwt_token:o}=await q.url("/register").post({email:a,password:s,mnemonic:t}).unauthorized(B).badRequest(B).json();P.set({user:{email:a,token:o}})}catch(o){console.log(o.stack),B(o.message)}})(r,i,o),t(4,n=!1)},function(){c=this.value,t(0,c)},()=>C(c,e.user.email),function(a){r=a,t(2,r)},function(a){i=a,t(3,i)}]}export default class extends a{constructor(a){super(),s(this,a,K,G,t,{})}}
