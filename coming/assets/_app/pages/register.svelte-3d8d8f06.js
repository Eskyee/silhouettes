import{S as a,i as s,s as t,l as o,f as e,r,u as c,v as n,d as i,K as l,B as u,Q as m,R as f,e as d,t as h,k as p,j as v,c as b,a as g,g as $,n as E,m as w,b as j,E as k,o as I,I as y,T as V,U as D,w as R,F as T,G as z,V as x,W as F,X as N}from"../chunks/vendor-54cab04d.js";import{P as O}from"../chunks/pending-3d660b55.js";import{s as U}from"../chunks/stores-e4a3cbaf.js";import{m as q}from"../chunks/stores-b93fd071.js";import{b as B}from"../chunks/api-b0bfc17a.js";import{e as H,a as P,f as S}from"../chunks/utils-a624e7bb.js";import{F as W}from"../chunks/fields-b0b65bab.js";import"../chunks/singletons-bb9012b7.js";const A=async(a,s)=>{try{H(void 0),await B.url("/activate").post({code:a,email:s}).unauthorized(H).badRequest(H).json(),P("/goodies",{noscroll:!0})}catch(t){H(t.message)}};function C(a){let s,t,o,c,l,u,T,z,x,F,N,O,U,q,B,H,P,S,A;function C(s){a[8](s)}function L(s){a[9](s)}let M={};return void 0!==a[2]&&(M.email=a[2]),void 0!==a[3]&&(M.password=a[3]),x=new W({props:M}),m.push((()=>f(x,"email",C))),m.push((()=>f(x,"password",L))),{c(){s=d("h2"),t=h("Almost there"),o=p(),c=d("p"),l=h("We just need an email and password"),u=p(),T=d("div"),z=d("form"),v(x.$$.fragment),O=p(),U=d("div"),q=d("div"),B=d("button"),H=h("Register"),this.h()},l(a){s=b(a,"H2",{class:!0});var e=g(s);t=$(e,"Almost there"),e.forEach(i),o=E(a),c=b(a,"P",{class:!0});var r=g(c);l=$(r,"We just need an email and password"),r.forEach(i),u=E(a),T=b(a,"DIV",{class:!0});var n=g(T);z=b(n,"FORM",{autocomplete:!0});var m=g(z);w(x.$$.fragment,m),O=E(m),U=b(m,"DIV",{class:!0});var f=g(U);q=b(f,"DIV",{class:!0});var d=g(q);B=b(d,"BUTTON",{type:!0});var h=g(B);H=$(h,"Register"),h.forEach(i),d.forEach(i),f.forEach(i),m.forEach(i),n.forEach(i),this.h()},h(){j(s,"class","container"),j(c,"class","container"),j(B,"type","submit"),j(q,"class","container column"),j(U,"class","container form-submit-controls"),j(z,"autocomplete","off"),j(T,"class","container")},m(r,n){e(r,s,n),k(s,t),e(r,o,n),e(r,c,n),k(c,l),e(r,u,n),e(r,T,n),k(T,z),I(x,z,null),k(z,O),k(z,U),k(U,q),k(q,B),k(B,H),P=!0,S||(A=y(z,"submit",V(a[5])),S=!0)},p(a,s){const t={};!F&&4&s&&(F=!0,t.email=a[2],D((()=>F=!1))),!N&&8&s&&(N=!0,t.password=a[3],D((()=>N=!1))),x.$set(t)},i(a){P||(n(x.$$.fragment,a),P=!0)},o(a){r(x.$$.fragment,a),P=!1},d(a){a&&i(s),a&&i(o),a&&i(c),a&&i(u),a&&i(T),R(x),S=!1,A()}}}function L(a){let s,t,o,c,l,u,m,f;return m=new O({props:{size:"medium"}}),{c(){s=d("div"),t=d("div"),o=d("h3"),c=h("Loading"),l=p(),u=d("div"),v(m.$$.fragment),this.h()},l(a){s=b(a,"DIV",{id:!0,class:!0});var e=g(s);t=b(e,"DIV",{class:!0});var r=g(t);o=b(r,"H3",{});var n=g(o);c=$(n,"Loading"),n.forEach(i),r.forEach(i),l=E(e),u=b(e,"DIV",{class:!0});var f=g(u);w(m.$$.fragment,f),f.forEach(i),e.forEach(i),this.h()},h(){j(t,"class","container"),j(u,"class","container"),j(s,"id","loading"),j(s,"class","container column")},m(a,r){e(a,s,r),k(s,t),k(t,o),k(o,c),k(s,l),k(s,u),I(m,u,null),f=!0},p:T,i(a){f||(n(m.$$.fragment,a),f=!0)},o(a){r(m.$$.fragment,a),f=!1},d(a){a&&i(s),R(m)}}}function M(a){let s,t,o,r,c,n,l,u,m,f,v,w,I,D,R,O;return{c(){s=d("h2"),t=h("Registered!"),o=p(),r=d("div"),c=h("Check your email for an activation code"),n=p(),l=d("form"),u=d("div"),m=d("div"),f=d("input"),v=p(),w=d("div"),I=d("button"),D=h("Submit"),this.h()},l(a){s=b(a,"H2",{class:!0});var e=g(s);t=$(e,"Registered!"),e.forEach(i),o=E(a),r=b(a,"DIV",{class:!0});var d=g(r);c=$(d,"Check your email for an activation code"),d.forEach(i),n=E(a),l=b(a,"FORM",{});var h=g(l);u=b(h,"DIV",{class:!0});var p=g(u);m=b(p,"DIV",{class:!0,style:!0});var j=g(m);f=b(j,"INPUT",{id:!0,autofocus:!0,autocapitalize:!0,class:!0}),j.forEach(i),p.forEach(i),v=E(h),w=b(h,"DIV",{class:!0});var k=g(w);I=b(k,"BUTTON",{});var y=g(I);D=$(y,"Submit"),y.forEach(i),k.forEach(i),h.forEach(i),this.h()},h(){j(s,"class","container"),j(r,"class","container mb"),j(f,"id","code"),f.autofocus=!0,j(f,"autocapitalize","off"),j(f,"class","grow"),j(m,"class","container"),z(m,"max-width","200px"),z(m,"margin","0 auto"),j(u,"class","form-field"),j(w,"class","container")},m(i,d){e(i,s,d),k(s,t),e(i,o,d),e(i,r,d),k(r,c),e(i,n,d),e(i,l,d),k(l,u),k(u,m),k(m,f),x(f,a[0]),k(l,v),k(l,w),k(w,I),k(I,D),f.focus(),R||(O=[y(f,"input",a[6]),F(S.call(null,f)),y(l,"submit",V(a[7]))],R=!0)},p(a,s){1&s&&f.value!==a[0]&&x(f,a[0])},i:T,o:T,d(a){a&&i(s),a&&i(o),a&&i(r),a&&i(n),a&&i(l),R=!1,N(O)}}}function G(a){let s,t,l,m;const f=[M,L,C],d=[];function h(a,s){return a[1].user?0:a[4]?1:2}return s=h(a),t=d[s]=f[s](a),{c(){t.c(),l=o()},l(a){t.l(a),l=o()},m(a,t){d[s].m(a,t),e(a,l,t),m=!0},p(a,[o]){let e=s;s=h(a),s===e?d[s].p(a,o):(u(),r(d[e],1,1,(()=>{d[e]=null})),c(),t=d[s],t?t.p(a,o):(t=d[s]=f[s](a),t.c()),n(t,1),t.m(l.parentNode,l))},i(a){m||(n(t),m=!0)},o(a){r(t),m=!1},d(a){d[s].d(a),a&&i(l)}}}function K(a,s,t){let o,e,r;l(a,q,(a=>t(10,o=a))),l(a,U,(a=>t(1,e=a)));let c,n,i="liquidart";return a.$$.update=()=>{3&a.$$.dirty&&c&&c.length>=6&&A(c,e.user.email)},[c,e,r,i,n,async()=>{t(4,n=!0),await(async(a,s,t)=>{try{H(void 0);let{jwt_token:o}=await B.url("/register").post({email:a,password:s,mnemonic:t}).unauthorized(H).badRequest(H).json();U.set({user:{email:a,token:o}})}catch(o){console.log(o.stack),H(o.message)}})(r,i,o),t(4,n=!1)},function(){c=this.value,t(0,c)},()=>A(c,e.user.email),function(a){r=a,t(2,r)},function(a){i=a,t(3,i)}]}export default class extends a{constructor(a){super(),s(this,a,K,G,t,{})}}
